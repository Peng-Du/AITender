# ç®€åŒ–ç‰ˆæ ‡ä¹¦ä¸‹è½½ç³»ç»Ÿè®¾è®¡æ–‡æ¡£
**é€‚ç”¨åœºæ™¯ï¼š10äººåŠå…¬å®¤å•æœºéƒ¨ç½²**
**å·¥ä½œç›®å½•ï¼šD:\AITender\TenderServer**

## 1. ç³»ç»Ÿæ¦‚è¿°

è¿™æ˜¯ä¸€ä¸ªæç®€ç‰ˆæœ¬çš„æ ‡ä¹¦ä¸‹è½½ç³»ç»Ÿï¼Œä¸“ä¸ºå°å‹åŠå…¬å®¤è®¾è®¡ï¼Œæ»¡è¶³10äººå·¦å³çš„å†…éƒ¨ä½¿ç”¨éœ€æ±‚ã€‚

### 1.1 æ ¸å¿ƒåŠŸèƒ½
- ğŸ” **ç®€å•æœç´¢**: æŒ‰æ ‡é¢˜å’Œæè¿°æœç´¢æ ‡ä¹¦
- ğŸ“‹ **ç»“æœåˆ—è¡¨**: æ˜¾ç¤ºæœç´¢ç»“æœå’Œä¸‹è½½é“¾æ¥
- â¬‡ï¸ **æ–‡ä»¶ä¸‹è½½**: ç›´æ¥ç‚¹å‡»ä¸‹è½½æ ‡ä¹¦æ–‡ä»¶
- ğŸ‘¥ **åŸºç¡€ç”¨æˆ·**: ç®€å•çš„ç”¨æˆ·ç™»å½•å’Œç®¡ç†

### 1.2 è®¾è®¡åŸåˆ™
- **æç®€æ¶æ„**: å•æœºéƒ¨ç½²ï¼Œæœ€å°‘ç»„ä»¶
- **æ˜“äºç»´æŠ¤**: æŠ€æœ¯æ ˆç®€å•ï¼Œå­¦ä¹ æˆæœ¬ä½
- **å¿«é€Ÿéƒ¨ç½²**: ä¸€é”®å®‰è£…ï¼Œå¼€ç®±å³ç”¨
- **æˆæœ¬æœ€ä½**: ä½¿ç”¨å¼€æºå…è´¹è½¯ä»¶

## 2. ç³»ç»Ÿæ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              ç”¨æˆ·æµè§ˆå™¨                  â”‚
â”‚         (Chrome/Firefox/Edge)          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚ HTTP/HTTPS
                  â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           WebæœåŠ¡å™¨ (å•æœº)              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚      å‰ç«¯åº”ç”¨ (é™æ€æ–‡ä»¶)            â”‚ â”‚
â”‚  â”‚    HTML/CSS/JavaScript              â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚      åç«¯æœåŠ¡                        â”‚ â”‚
â”‚  â”‚    Node.js + Express                â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚      æ•°æ®åº“                          â”‚ â”‚
â”‚  â”‚    SQLite (å•æ–‡ä»¶)                  â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚      æ–‡ä»¶å­˜å‚¨                        â”‚ â”‚
â”‚  â”‚    æœ¬åœ°æ–‡ä»¶å¤¹                       â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## 3. æŠ€æœ¯æ ˆé€‰æ‹©

### 3.1 å‰ç«¯æŠ€æœ¯æ ˆ
- **åŸºç¡€**: HTML5 + CSS3 + JavaScript (ES6)
- **UIæ¡†æ¶**: Bootstrap 5 (ç®€å•æ˜“ç”¨)
- **æœç´¢åŠŸèƒ½**: åŸç”ŸJavaScriptå®ç°
- **æ–‡ä»¶ä¸Šä¼ **: åŸç”ŸFormData API
- **æ— éœ€æ„å»ºå·¥å…·**: ç›´æ¥åœ¨æµè§ˆå™¨è¿è¡Œ

### 3.2 åç«¯æŠ€æœ¯æ ˆ
- **è¿è¡Œæ—¶**: Node.js 18+ (LTSç‰ˆæœ¬)
- **æ¡†æ¶**: Express.js (æœ€ç®€å•çš„Webæ¡†æ¶)
- **æ•°æ®åº“**: SQLite (æ— éœ€å®‰è£…ï¼Œå•æ–‡ä»¶æ•°æ®åº“)
- **æ–‡ä»¶å­˜å‚¨**: æœ¬åœ°æ–‡ä»¶ç³»ç»Ÿ
- **è®¤è¯**: ç®€å•çš„Sessionè®¤è¯

### 3.3 å¼€å‘å·¥å…·
- **ä»£ç ç¼–è¾‘**: VSCode (å…è´¹)
- **ç‰ˆæœ¬æ§åˆ¶**: Git (å…è´¹)
- **APIæµ‹è¯•**: Postman (å…è´¹ç‰ˆ)

## 4. æ•°æ®åº“è®¾è®¡ (SQLite)

### 4.1 æ•°æ®åº“ç»“æ„
```sql
-- ç”¨æˆ·è¡¨
CREATE TABLE users (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    username TEXT UNIQUE NOT NULL,
    password_hash TEXT NOT NULL,
    full_name TEXT NOT NULL,
    role TEXT DEFAULT 'user',  -- 'user' æˆ– 'admin'
    created_at DATETIME DEFAULT CURRENT_TIMESTAMP
);

-- æ ‡ä¹¦è¡¨
CREATE TABLE tenders (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    title TEXT NOT NULL,
    description TEXT,
    file_path TEXT NOT NULL,  -- ç›¸å¯¹è·¯å¾„
    file_name TEXT NOT NULL,
    file_size INTEGER NOT NULL,
    upload_user_id INTEGER,
    download_count INTEGER DEFAULT 0,
    created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (upload_user_id) REFERENCES users(id)
);

-- ä¸‹è½½è®°å½•è¡¨ (å¯é€‰ï¼Œç”¨äºç»Ÿè®¡)
CREATE TABLE download_records (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    tender_id INTEGER NOT NULL,
    user_id INTEGER NOT NULL,
    download_time DATETIME DEFAULT CURRENT_TIMESTAMP,
    ip_address TEXT,
    FOREIGN KEY (tender_id) REFERENCES tenders(id),
    FOREIGN KEY (user_id) REFERENCES users(id)
);
```

### 4.2 ç´¢å¼•ä¼˜åŒ–
```sql
-- ä¸ºæœç´¢åˆ›å»ºç´¢å¼•
CREATE INDEX idx_tenders_title ON tenders(title);
CREATE INDEX idx_tenders_description ON tenders(description);
CREATE INDEX idx_tenders_created_at ON tenders(created_at);
```

## 5. é¡¹ç›®ç»“æ„

```
D:\AITender\TenderServer\
â”œâ”€â”€ package.json              # Node.jsé¡¹ç›®é…ç½®
â”œâ”€â”€ server.js                 # åç«¯å…¥å£æ–‡ä»¶
â”œâ”€â”€ config/
â”‚   â”œâ”€â”€ database.js           # æ•°æ®åº“é…ç½®
â”‚   â””â”€â”€ config.js             # åº”ç”¨é…ç½®
â”œâ”€â”€ routes/
â”‚   â”œâ”€â”€ auth.js               # è®¤è¯è·¯ç”±
â”‚   â”œâ”€â”€ tenders.js            # æ ‡ä¹¦ç›¸å…³è·¯ç”±
â”‚   â””â”€â”€ upload.js             # æ–‡ä»¶ä¸Šä¼ è·¯ç”±
â”œâ”€â”€ middleware/
â”‚   â”œâ”€â”€ auth.js               # è®¤è¯ä¸­é—´ä»¶
â”‚   â””â”€â”€ upload.js             # æ–‡ä»¶ä¸Šä¼ ä¸­é—´ä»¶
â”œâ”€â”€ models/
â”‚   â”œâ”€â”€ User.js               # ç”¨æˆ·æ¨¡å‹
â”‚   â””â”€â”€ Tender.js             # æ ‡ä¹¦æ¨¡å‹
â”œâ”€â”€ public/                   # å‰ç«¯é™æ€æ–‡ä»¶
â”‚   â”œâ”€â”€ index.html            # é¦–é¡µ
â”‚   â”œâ”€â”€ login.html            # ç™»å½•é¡µ
â”‚   â”œâ”€â”€ css/
â”‚   â”‚   â””â”€â”€ style.css         # æ ·å¼æ–‡ä»¶
â”‚   â”œâ”€â”€ js/
â”‚   â”‚   â”œâ”€â”€ app.js            # ä¸»åº”ç”¨é€»è¾‘
â”‚   â”‚   â”œâ”€â”€ auth.js           # è®¤è¯é€»è¾‘
â”‚   â”‚   â””â”€â”€ search.js         # æœç´¢é€»è¾‘
â”‚   â””â”€â”€ assets/               # é™æ€èµ„æº
â”œâ”€â”€ uploads/                  # ä¸Šä¼ æ–‡ä»¶å­˜å‚¨ç›®å½•
â”œâ”€â”€ database/
â”‚   â””â”€â”€ tender.db             # SQLiteæ•°æ®åº“æ–‡ä»¶
â””â”€â”€ README.md                 # é¡¹ç›®è¯´æ˜
```

## 6. æ ¸å¿ƒåŠŸèƒ½å®ç°

### 6.1 åç«¯æ ¸å¿ƒä»£ç  (server.js)
```javascript
const express = require('express');
const sqlite3 = require('sqlite3').verbose();
const session = require('express-session');
const path = require('path');
const multer = require('multer');

const app = express();
const PORT = 3000;

// æ•°æ®åº“è¿æ¥ (ä½¿ç”¨ç»å¯¹è·¯å¾„)
const dbPath = path.join(__dirname, 'database', 'tender.db');
const db = new sqlite3.Database(dbPath);

// ä¸­é—´ä»¶é…ç½®
app.use(express.json());
app.use(express.urlencoded({ extended: true }));
app.use(express.static('public'));
app.use(session({
    secret: 'your-secret-key',
    resave: false,
    saveUninitialized: false,
    cookie: { maxAge: 24 * 60 * 60 * 1000 } // 24å°æ—¶
}));

// æ–‡ä»¶ä¸Šä¼ é…ç½®
const storage = multer.diskStorage({
    destination: path.join(__dirname, 'uploads'),
    filename: function(req, file, cb) {
        cb(null, Date.now() + '-' + file.originalname);
    }
});
const upload = multer({
    storage: storage,
    fileFilter: function(req, file, cb) {
        const allowedTypes = ['.pdf', '.doc', '.docx', '.zip'];
        const ext = path.extname(file.originalname).toLowerCase();
        if (allowedTypes.includes(ext)) {
            cb(null, true);
        } else {
            cb(new Error('åªå…è®¸PDFã€DOCã€DOCXã€ZIPæ–‡ä»¶'));
        }
    },
    limits: { fileSize: 50 * 1024 * 1024 } // 50MBé™åˆ¶
});

// æœç´¢æ¥å£
app.get('/api/tenders/search', (req, res) => {
    const query = req.query.q || '';
    const sql = `
        SELECT t.*, u.full_name as uploader_name
        FROM tenders t
        LEFT JOIN users u ON t.upload_user_id = u.id
        WHERE t.title LIKE ? OR t.description LIKE ?
        ORDER BY t.created_at DESC
    `;

    db.all(sql, [`%${query}%`, `%${query}%`], (err, rows) => {
        if (err) {
            return res.status(500).json({ error: err.message });
        }
        res.json(rows);
    });
});

// ä¸‹è½½æ¥å£
app.get('/api/tenders/:id/download', (req, res) => {
    const tenderId = req.params.id;
    const sql = 'SELECT * FROM tenders WHERE id = ?';

    db.get(sql, [tenderId], (err, tender) => {
        if (err) {
            return res.status(500).json({ error: err.message });
        }
        if (!tender) {
            return res.status(404).json({ error: 'æ ‡ä¹¦ä¸å­˜åœ¨' });
        }

        const filePath = path.join(__dirname, 'uploads', tender.file_name);
        res.download(filePath, tender.file_name, (err) => {
            if (!err) {
                // æ›´æ–°ä¸‹è½½æ¬¡æ•°
                db.run('UPDATE tenders SET download_count = download_count + 1 WHERE id = ?', [tenderId]);

                // è®°å½•ä¸‹è½½æ—¥å¿—
                if (req.session.user) {
                    db.run('INSERT INTO download_records (tender_id, user_id, ip_address) VALUES (?, ?, ?)',
                        [tenderId, req.session.user.id, req.ip]);
                }
            }
        });
    });
});

// å¯åŠ¨æœåŠ¡å™¨
app.listen(PORT, () => {
    console.log(`æ ‡ä¹¦ç³»ç»Ÿè¿è¡Œåœ¨ http://localhost:${PORT}`);
    console.log(`å·¥ä½œç›®å½•: ${__dirname}`);
});
```

### 6.2 å‰ç«¯æœç´¢åŠŸèƒ½ (public/js/search.js)
```javascript
class TenderSearch {
    constructor() {
        this.searchInput = document.getElementById('searchInput');
        this.resultsContainer = document.getElementById('resultsContainer');
        this.searchButton = document.getElementById('searchButton');

        this.initEventListeners();
    }

    initEventListeners() {
        this.searchButton.addEventListener('click', () => this.search());
        this.searchInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') this.search();
        });
    }

    async search() {
        const query = this.searchInput.value.trim();
        if (!query) {
            this.showMessage('è¯·è¾“å…¥æœç´¢å…³é”®è¯');
            return;
        }

        try {
            const response = await fetch(`/api/tenders/search?q=${encodeURIComponent(query)}`);
            const tenders = await response.json();

            this.displayResults(tenders);
        } catch (error) {
            this.showMessage('æœç´¢å¤±è´¥ï¼Œè¯·é‡è¯•');
        }
    }

    displayResults(tenders) {
        if (tenders.length === 0) {
            this.resultsContainer.innerHTML = '<p>æœªæ‰¾åˆ°ç›¸å…³æ ‡ä¹¦</p>';
            return;
        }

        const html = tenders.map(tender => `
            <div class="tender-item">
                <h3>${this.escapeHtml(tender.title)}</h3>
                <p class="description">${this.escapeHtml(tender.description || 'æš‚æ— æè¿°')}</p>
                <div class="meta">
                    <span>ä¸Šä¼ è€…: ${this.escapeHtml(tender.uploader_name || 'æœªçŸ¥')}</span>
                    <span>æ–‡ä»¶å¤§å°: ${this.formatFileSize(tender.file_size)}</span>
                    <span>ä¸‹è½½æ¬¡æ•°: ${tender.download_count}</span>
                </div>
                <div class="actions">
                    <a href="/api/tenders/${tender.id}/download" class="btn btn-primary">ä¸‹è½½</a>
                </div>
            </div>
        `).join('');

        this.resultsContainer.innerHTML = html;
    }

    escapeHtml(text) {
        const div = document.createElement('div');
        div.textContent = text;
        return div.innerHTML;
    }

    formatFileSize(bytes) {
        if (bytes === 0) return '0 Bytes';
        const k = 1024;
        const sizes = ['Bytes', 'KB', 'MB', 'GB'];
        const i = Math.floor(Math.log(bytes) / Math.log(k));
        return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];
    }

    showMessage(message) {
        this.resultsContainer.innerHTML = `<p class="message">${message}</p>`;
    }
}

// é¡µé¢åŠ è½½å®Œæˆååˆå§‹åŒ–
document.addEventListener('DOMContentLoaded', () => {
    new TenderSearch();
});
```

## 7. éƒ¨ç½²æ–¹æ¡ˆ

### 7.1 ç³»ç»Ÿè¦æ±‚
- **æ“ä½œç³»ç»Ÿ**: Windows 10/11, Ubuntu 20.04+, macOS 10.15+
- **å†…å­˜**: æœ€å°4GBï¼Œæ¨è8GB
- **å­˜å‚¨**: æœ€å°50GBå¯ç”¨ç©ºé—´
- **ç½‘ç»œ**: å±€åŸŸç½‘è¿æ¥

### 7.2 å®‰è£…æ­¥éª¤

#### æ­¥éª¤1: å®‰è£…Node.js
```bash
# Windows: ä¸‹è½½å¹¶å®‰è£… node-v18.x.x.msi
# Ubuntu:
curl -fsSL https://deb.nodesource.com/setup_18.x | sudo -E bash -
sudo apt-get install -y nodejs
# macOS:
brew install node
```

#### æ­¥éª¤2: é¡¹ç›®åˆå§‹åŒ–
```bash
# åˆ‡æ¢åˆ°å·¥ä½œç›®å½•
cd "D:\AITender\TenderServer"

# åˆå§‹åŒ–npmé¡¹ç›®
npm init -y

# å®‰è£…ä¾èµ–
npm install express sqlite3 express-session multer bcrypt

# åˆ›å»ºå¿…è¦çš„ç›®å½•
mkdir -p database uploads public/css public/js
```

#### æ­¥éª¤3: åˆå§‹åŒ–æ•°æ®åº“
```javascript
// scripts/init-db.js
const sqlite3 = require('sqlite3').verbose();
const path = require('path');

const dbPath = path.join(__dirname, '..', 'database', 'tender.db');
const db = new sqlite3.Database(dbPath);

// åˆ›å»ºè¡¨
db.serialize(() => {
    // ç”¨æˆ·è¡¨
    db.run(`CREATE TABLE IF NOT EXISTS users (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        username TEXT UNIQUE NOT NULL,
        password_hash TEXT NOT NULL,
        full_name TEXT NOT NULL,
        role TEXT DEFAULT 'user',
        created_at DATETIME DEFAULT CURRENT_TIMESTAMP
    )`);

    // æ ‡ä¹¦è¡¨
    db.run(`CREATE TABLE IF NOT EXISTS tenders (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        title TEXT NOT NULL,
        description TEXT,
        file_path TEXT NOT NULL,
        file_name TEXT NOT NULL,
        file_size INTEGER NOT NULL,
        upload_user_id INTEGER,
        download_count INTEGER DEFAULT 0,
        created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
        FOREIGN KEY (upload_user_id) REFERENCES users(id)
    )`);

    // ä¸‹è½½è®°å½•è¡¨
    db.run(`CREATE TABLE IF NOT EXISTS download_records (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        tender_id INTEGER NOT NULL,
        user_id INTEGER NOT NULL,
        download_time DATETIME DEFAULT CURRENT_TIMESTAMP,
        ip_address TEXT,
        FOREIGN KEY (tender_id) REFERENCES tenders(id),
        FOREIGN KEY (user_id) REFERENCES users(id)
    )`);

    // åˆ›å»ºç´¢å¼•
    db.run('CREATE INDEX IF NOT EXISTS idx_tenders_title ON tenders(title)');
    db.run('CREATE INDEX IF NOT EXISTS idx_tenders_description ON tenders(description)');
    db.run('CREATE INDEX IF NOT EXISTS idx_tenders_created_at ON tenders(created_at)');

    console.log('æ•°æ®åº“åˆå§‹åŒ–å®Œæˆ');
});

db.close();
```

#### æ­¥éª¤4: å¯åŠ¨æœåŠ¡
```bash
# åˆå§‹åŒ–æ•°æ®åº“
node scripts/init-db.js

# å¼€å‘æ¨¡å¼
node server.js

# æˆ–è€…ä½¿ç”¨npmè„šæœ¬
npm start
```

#### æ­¥éª¤5: è®¿é—®ç³»ç»Ÿ
- æœ¬åœ°è®¿é—®: `http://localhost:3000`
- å±€åŸŸç½‘è®¿é—®: `http://[æœåŠ¡å™¨IP]:3000`

### 7.3 Windowsç¯å¢ƒé…ç½®

#### åˆ›å»ºå¯åŠ¨è„šæœ¬ (start.bat)
```batch
@echo off
cd /d "D:\AITender\TenderServer"
echo æ­£åœ¨å¯åŠ¨æ ‡ä¹¦ä¸‹è½½ç³»ç»Ÿ...
node server.js
pause
```

#### åˆ›å»ºæœåŠ¡å¯åŠ¨è„šæœ¬ (install-service.bat)
```batch
@echo off
cd /d "D:\AITender\TenderServer"

echo å®‰è£…PM2...
npm install -g pm2

echo å¯åŠ¨æœåŠ¡...
pm2 start server.js --name "tender-system"

echo è®¾ç½®å¼€æœºè‡ªå¯...
pm2 startup
pm2 save

echo æœåŠ¡å®‰è£…å®Œæˆï¼
```

### 7.4 ç”Ÿäº§ç¯å¢ƒé…ç½®

#### ä½¿ç”¨PM2è¿›ç¨‹ç®¡ç†
```bash
# å®‰è£…PM2
npm install -g pm2

# å¯åŠ¨åº”ç”¨
pm2 start server.js --name "tender-system"

# æŸ¥çœ‹çŠ¶æ€
pm2 status

# æŸ¥çœ‹æ—¥å¿—
pm2 logs tender-system

# é‡å¯æœåŠ¡
pm2 restart tender-system

# åœæ­¢æœåŠ¡
pm2 stop tender-system

# è®¾ç½®å¼€æœºè‡ªå¯
pm2 startup
pm2 save
```

## 8. å®‰å…¨é…ç½®

### 8.1 åŸºç¡€å®‰å…¨æªæ–½
- **å¯†ç åŠ å¯†**: ä½¿ç”¨bcryptåŠ å¯†å­˜å‚¨å¯†ç 
- **ä¼šè¯ç®¡ç†**: è®¾ç½®åˆç†çš„ä¼šè¯è¶…æ—¶æ—¶é—´
- **æ–‡ä»¶ç±»å‹é™åˆ¶**: åªå…è®¸ç‰¹å®šæ ¼å¼çš„æ–‡ä»¶ä¸Šä¼ 
- **æ–‡ä»¶å¤§å°é™åˆ¶**: é˜²æ­¢å¤§æ–‡ä»¶æ”»å‡»
- **è¾“å…¥éªŒè¯**: å‰åç«¯åŒé‡è¾“å…¥éªŒè¯

### 8.2 Windowsé˜²ç«å¢™é…ç½®
```batch
# ä»¥ç®¡ç†å‘˜èº«ä»½è¿è¡Œå‘½ä»¤æç¤ºç¬¦
netsh advfirewall firewall add rule name="TenderServer" dir=in action=allow protocol=TCP localport=3000
```

## 9. å¤‡ä»½æ–¹æ¡ˆ

### 9.1 Windowså¤‡ä»½è„šæœ¬ (backup.bat)
```batch
@echo off
set BACKUP_DIR="D:\backup\TenderServer"
set DATE=%date:~0,4%%date:~5,2%%date:~8,2%_%time:~0,2%%time:~3,2%
set DATE=%DATE: =0%

echo å¼€å§‹å¤‡ä»½...
mkdir %BACKUP_DIR% 2>nul

# å¤‡ä»½æ•°æ®åº“
copy "D:\AITender\TenderServer\database\tender.db" "%BACKUP_DIR%\tender_%DATE%.db"

# å¤‡ä»½ä¸Šä¼ æ–‡ä»¶
powershell "Compress-Archive -Path 'D:\AITender\TenderServer\uploads\*' -DestinationPath '%BACKUP_DIR%\uploads_%DATE%.zip'"

echo å¤‡ä»½å®Œæˆ: %BACKUP_DIR%
```

### 9.2 è‡ªåŠ¨å¤‡ä»½é…ç½® (Windowsä»»åŠ¡è®¡åˆ’ç¨‹åº)
1. æ‰“å¼€"ä»»åŠ¡è®¡åˆ’ç¨‹åº"
2. åˆ›å»ºåŸºæœ¬ä»»åŠ¡
3. è®¾ç½®æ¯å¤©å‡Œæ™¨2ç‚¹è¿è¡Œ
4. è§¦å‘å™¨: `D:\AITender\TenderServer\backup.bat`

## 10. ç»´æŠ¤æŒ‡å—

### 10.1 æ—¥å¸¸ç»´æŠ¤
- **æ—¥å¿—æ£€æŸ¥**: `pm2 logs tender-system`
- **ç£ç›˜ç©ºé—´**: æ£€æŸ¥uploadså’Œdatabaseç›®å½•å¤§å°
- **æ€§èƒ½ç›‘æ§**: è§‚å¯Ÿå†…å­˜å’ŒCPUä½¿ç”¨æƒ…å†µ
- **æ•°æ®æ¸…ç†**: å®šæœŸæ¸…ç†è¿‡æœŸçš„ä¸‹è½½è®°å½•

### 10.2 æ•…éšœæ’é™¤
| é—®é¢˜ | å¯èƒ½åŸå›  | è§£å†³æ–¹æ¡ˆ |
|------|----------|----------|
| æ— æ³•è®¿é—®é¡µé¢ | æœåŠ¡æœªå¯åŠ¨ | è¿è¡Œ `pm2 start tender-system` |
| æœç´¢æ— ç»“æœ | æ•°æ®åº“ä¸ºç©º | ä¸Šä¼ æ ‡ä¹¦æ–‡ä»¶ |
| ä¸‹è½½å¤±è´¥ | æ–‡ä»¶è·¯å¾„é”™è¯¯ | æ£€æŸ¥uploadsç›®å½•æƒé™ |
| ç™»å½•å¤±è´¥ | å¯†ç é”™è¯¯ | é‡ç½®ç”¨æˆ·å¯†ç  |
| æ•°æ®åº“é”™è¯¯ | æ–‡ä»¶æƒé™é—®é¢˜ | æ£€æŸ¥databaseç›®å½•æƒé™ |

### 10.3 å‡çº§æŒ‡å—
```bash
# 1. å¤‡ä»½æ•°æ®
backup.bat

# 2. åœæ­¢æœåŠ¡
pm2 stop tender-system

# 3. æ›´æ–°ä»£ç 
git pull origin main

# 4. æ›´æ–°ä¾èµ–
npm install

# 5. é‡å¯æœåŠ¡
pm2 start tender-system
```

## 11. æˆæœ¬åˆ†æ

### 11.1 ç¡¬ä»¶æˆæœ¬
- **æœåŠ¡å™¨**: å¤ç”¨ç°æœ‰åŠå…¬ç”µè„‘ Â¥0
- **å­˜å‚¨**: 500GBç¡¬ç›˜ç©ºé—´ Â¥0
- **ç½‘ç»œ**: ç°æœ‰å±€åŸŸç½‘ Â¥0

### 11.2 è½¯ä»¶æˆæœ¬
- **æ“ä½œç³»ç»Ÿ**: Windows/Linux (å·²æœ‰) Â¥0
- **Node.js**: å¼€æºå…è´¹ Â¥0
- **æ•°æ®åº“**: SQLite (å†…åµŒ) Â¥0
- **å¼€å‘å·¥å…·**: VSCode (å…è´¹) Â¥0

### 11.3 äººåŠ›æˆæœ¬
- **å¼€å‘æ—¶é—´**: 1-2å‘¨ (1åå¼€å‘äººå‘˜)
- **éƒ¨ç½²é…ç½®**: 1å¤©
- **åŸ¹è®­ä½¿ç”¨**: åŠå¤©

**æ€»æˆæœ¬**: åŸºæœ¬ä¸ºé›¶ (å¤ç”¨ç°æœ‰ç¡¬ä»¶å’Œå…è´¹è½¯ä»¶)

## 12. æ‰©å±•å»ºè®®

å¦‚æœæœªæ¥éœ€è¦æ‰©å±•ï¼Œå¯ä»¥è€ƒè™‘ï¼š

### 12.1 çŸ­æœŸæ‰©å±• (1-6ä¸ªæœˆ)
- å¢åŠ ç”¨æˆ·æƒé™ç®¡ç†
- æ·»åŠ æ–‡ä»¶åˆ†ç±»åŠŸèƒ½
- å®ç°ä¸‹è½½ç»Ÿè®¡æŠ¥è¡¨
- æ·»åŠ æ‰¹é‡ä¸Šä¼ åŠŸèƒ½

### 12.2 ä¸­æœŸæ‰©å±• (6-12ä¸ªæœˆ)
- è¿ç§»åˆ°MySQLæ•°æ®åº“
- æ·»åŠ å…¨æ–‡æœç´¢
- å®ç°æ–‡ä»¶ç‰ˆæœ¬æ§åˆ¶
- æ·»åŠ ç§»åŠ¨ç«¯æ”¯æŒ

### 12.3 é•¿æœŸæ‰©å±• (1å¹´ä»¥ä¸Š)
- å¾®æœåŠ¡æ¶æ„æ”¹é€ 
- äº‘ç«¯éƒ¨ç½²
- å¤šç§Ÿæˆ·æ”¯æŒ
- é«˜çº§æœç´¢åŠŸèƒ½

---

## é™„å½•A: package.jsoné…ç½®æ–‡ä»¶
```json
{
  "name": "tender-server",
  "version": "1.0.0",
  "description": "ç®€åŒ–ç‰ˆæ ‡ä¹¦ä¸‹è½½ç³»ç»Ÿ",
  "main": "server.js",
  "scripts": {
    "start": "node server.js",
    "dev": "nodemon server.js",
    "init-db": "node scripts/init-db.js",
    "backup": "backup.bat"
  },
  "dependencies": {
    "express": "^4.18.2",
    "sqlite3": "^5.1.6",
    "express-session": "^1.17.3",
    "multer": "^1.4.5-lts.1",
    "bcrypt": "^5.1.1"
  },
  "devDependencies": {
    "nodemon": "^3.0.1"
  },
  "keywords": ["tender", "download", "nodejs"],
  "author": "Your Name",
  "license": "MIT"
}
```

## é™„å½•B: ç¯å¢ƒå˜é‡é…ç½® (.env)
```
# æœåŠ¡å™¨é…ç½®
PORT=3000
HOST=0.0.0.0

# æ•°æ®åº“é…ç½®
DB_PATH=./database/tender.db

# ä¼šè¯é…ç½®
SESSION_SECRET=your-secret-key-change-this-in-production
SESSION_MAX_AGE=86400000

# æ–‡ä»¶ä¸Šä¼ é…ç½®
UPLOAD_DIR=./uploads
MAX_FILE_SIZE=52428800
ALLOWED_FILE_TYPES=.pdf,.doc,.docx,.zip
```

**æ€»ç»“**: è¿™ä¸ªç®€åŒ–ç‰ˆæ–¹æ¡ˆä»¥æœ€ä½çš„æˆæœ¬å’Œå¤æ‚åº¦ï¼Œæ»¡è¶³10äººåŠå…¬å®¤çš„æ ‡ä¹¦ä¸‹è½½éœ€æ±‚ï¼ŒæŠ€æœ¯æ ˆç®€å•ï¼Œéƒ¨ç½²ç»´æŠ¤å®¹æ˜“ï¼Œæ˜¯å°å‹å›¢é˜Ÿçš„ç†æƒ³é€‰æ‹©ã€‚é¡¹ç›®é…ç½®ä¸ºåœ¨D:\AITender\TenderServerç›®å½•ä¸‹è¿è¡Œã€‚